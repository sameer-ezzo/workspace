<div class="form-wrapper">
    @let _vm = viewModel();

    <dynamic-form
        #dynForm
        [fields]="_vm.fields"
        [(value)]="value"
        (fieldValueChange)="onValueChange($event)"
        [formName]="_vm.name"
        [preventDirtyUnload]="_vm.preventDirtyUnload"
        [theme]="_vm.theme"
        [conditions]="_vm.conditions"
        (submit)="onSubmit()"
        [form]="form()"
        [formGroup]="form()"
    ></dynamic-form>
</div>

@if (submitActionButton() || actions().length) {
    <div class="toolbar footer">
        @if (submitActionButton()) {
            <mat-btn
                [descriptor]="submitActionButton()"
                [loading]="submitting()"
                (onClick)="dynForm.ngSubmit()"
                [disabled]="
                    this.submitting() ||
                    (dynForm.invalid && (dynForm.dirty || dynForm.touched))
                "
            >
            </mat-btn>
        }

        @for (descriptor of actions(); track descriptor.name) {
            <mat-btn
                [descriptor]="descriptor"
                (onClick)="onAction($event)"
            ></mat-btn>
        }
    </div>
}
