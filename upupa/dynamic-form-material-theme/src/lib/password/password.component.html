<mat-form-field [appearance]="appearance()" [floatLabel]="floatLabel()" style="width: 100%">
    <!-- @if (label()) {
        <mat-label>{{ label() }}</mat-label>
    }
    <pwd-input matInput [formControl]="control()"></pwd-input>
    <mat-error>
        <span *errors="control().errors; control: control(); let message">{{ message }}</span>
    </mat-error>
</mat-form-field> -->
@if (label()) {
        <mat-label>{{ label() }}</mat-label>
    }
    <input
        matInput
        #input
        [type]="showPassword() === false ? 'password' : 'text'"
        [attr.autocomplete]="autocomplete()"
        [value]="value()"
        (input)="value.set(input.value)"
        [formControl]="control()"
        [readonly]="readonly()"
        [placeholder]="placeholder()"
        [attr.name]="name()"
    />
    <button tabindex="-1" type="button" matSuffix mat-icon-button (click)="$event.stopPropagation(); showPassword.set(!showPassword())">
        <mat-icon>{{ showPassword() ? "visibility_off" : "visibility" }}</mat-icon>
    </button>

    @if (canGenerateRandomPassword() === true) {
        <button tabindex="-1" type="button" matSuffix mat-icon-button (click)="$event.stopPropagation(); generateRandomPassword()">
            <mat-icon>key</mat-icon>
        </button>
    }
    @if (hint()) {
        <mat-hint>{{ hint() }}</mat-hint>
    }

    <mat-error>
        <span *errors="control().errors; control: control(); let message">{{ message }}</span>
    </mat-error>
</mat-form-field>

@if (showConfirmPasswordInput()) {
    <mat-form-field [appearance]="appearance()" [floatLabel]="floatLabel()" style="width: 100%">
        <input
            matInput
            [type]="showPassword() !== false ? 'text' : 'password'"
            (input)="checkValidity()"
            [attr.autocomplete]="autocomplete()"
            (blur)="changeTouchedStatus()"
            [readonly]="readonly()"
            placeholder="Confirm Password"
            [formControl]="confirmControl"
            [attr.name]="name() + '-confirm'"
        />

        <mat-error>
            <span *errors="control().errors; control: control(); let message">{{ message }}</span>
        </mat-error>
    </mat-form-field>
}
