<mat-form-field [appearance]="appearance()" [floatLabel]="floatLabel()" style="width: 100%">
    <input type="hidden" #valueInput [formControl]="control()" [attr.name]="name()" [value]="value()" />
    @if (label()) {
        <mat-label>{{ label() }}</mat-label>
    }
    <input
        #displayInput
        matInput
        type="text"
        [disabled]="disabled()"
        [matAutocomplete]="auto"
        [required]="required()"
        (input)="_search(displayInput.value)"
        [placeholder]="placeholder()"
    />
    <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete" (optionSelected)="displayInput.value = displayOfKey($event.option.value); selectByKey($event.option.value)">
        @for (item of adapter().normalized(); track item.key) {
            <mat-option [value]="item.key">
                @if (item.image) {
                    <img [src]="item.image" />
                }
                <span>{{ item.display }}</span>
            </mat-option>
        } @empty {
            <mat-option [value]="displayInput.value">
                <span>{{ displayInput.value }}</span>
            </mat-option>
        }
    </mat-autocomplete>
    @if (hint()) {
        <mat-hint>{{ hint() }}</mat-hint>
    }
    <mat-error *errors="control().errors; control: control(); let message">{{ message }}</mat-error>
</mat-form-field>
